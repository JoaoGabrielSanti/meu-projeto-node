steps:
# 1. Checkout do código (Baixa o código do GitHub)
- uses: actions/checkout@v3

# 2. Configurar Node.js e instalar dependências
# Necessário para o seu projeto Express/Node rodar "npm install"
- name: Configurar e Instalar Dependências Node.js
  uses: actions/setup-node@v3
  with:
    node-version: '18'

- name: Instalar Dependências
  run: npm install

# 3. FTP Deploy Locaweb
# localDir: "./" é usado para projetos Node.js/Express (raiz do projeto)
# Certifique-se de que o arquivo .ftpignore existe para excluir node_modules.
- name: FTP Deploy Locaweb (Corrigido para FTP Comum)
  uses: locaweb/ftp-deploy@1.0.0
  with:
    host: ${{ secrets.HOST }} 
    user: ${{ secrets.USER }}
    password: ${{ secrets.PASS }}
    localDir: "./" 
    protocol: "ftp"
